<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Cloudinary Image Uploader - GudangResto</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; background: #f4f7f6; display: flex; justify-content: center; padding: 40px; }
        .card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); width: 100%; max-width: 450px; text-align: center; }
        .upload-area { border: 2px dashed #d97706; padding: 20px; border-radius: 10px; margin-bottom: 20px; cursor: pointer; }
        button { background: #1b4332; color: white; border: none; padding: 12px 25px; border-radius: 6px; cursor: pointer; font-weight: 600; width: 100%; }
        #result { margin-top: 20px; display: none; }
        input[type="text"] { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; background: #f9f9f9; }
        img { width: 100%; border-radius: 8px; margin-top: 10px; }
    </style>
</head>
<body>

<div class="card">
    <h2>Upload Foto Katalog</h2>
    <p style="font-size: 0.8rem; color: #666;">Pilih gambar alat resto/kantor untuk mendapatkan link URL</p>
    
    <div class="upload-area">
        <input type="file" id="fileInput" accept="image/*">
    </div>
    
    <button id="uploadBtn">Upload ke Cloudinary</button>

    <div id="status" style="margin-top: 10px; font-size: 0.9rem;"></div>

    <div id="result">
        <p style="font-weight: 600; text-align: left; margin-bottom: 5px;">Link Gambar Anda:</p>
        <input type="text" id="linkUrl" readonly onclick="this.select()">
        <p style="font-size: 0.7rem; color: #d97706;">*Klik link untuk menyalin</p>
        <img id="preview" src="" alt="Preview">
    </div>
</div>

<script>
    const cloudName = "ISI_CLOUD_NAME_ANDA"; // Gantilah dengan Cloud Name Anda
    const uploadPreset = "ISI_UPLOAD_PRESET_ANDA"; // Gantilah dengan Upload Preset (Unsigned) Anda

    const uploadBtn = document.getElementById('uploadBtn');
    const fileInput = document.getElementById('fileInput');
    const status = document.getElementById('status');
    const resultDiv = document.getElementById('result');
    const linkUrl = document.getElementById('linkUrl');
    const preview = document.getElementById('preview');

    uploadBtn.addEventListener('click', async () => {
        const file = fileInput.files[0];
        if (!file) return alert("Silakan pilih file dulu.");

        uploadBtn.disabled = true;
        status.innerText = "Proses mengunggah...";

        const formData = new FormData();
        formData.append('file', file);
        formData.append('upload_preset', uploadPreset);

        try {
            const response = await fetch(`https://api.cloudinary.com/v1_1/${cloudName}/image/upload`, {
                method: 'POST',
                body: formData
            });

            const data = await response.json();

            if (data.secure_url) {
                status.innerText = "Upload Berhasil!";
                linkUrl.value = data.secure_url;
                preview.src = data.secure_url;
                resultDiv.style.display = 'block';
            } else {
                status.innerText = "Gagal: " + (data.error ? data.error.message : "Error tidak diketahui");
            }
        } catch (error) {
            console.error(error);
            status.innerText = "Terjadi kesalahan koneksi.";
        } finally {
            uploadBtn.disabled = false;
        }
    });
</script>

</body>
</html>